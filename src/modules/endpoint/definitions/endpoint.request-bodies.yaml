components:
  requestBodies:
    EndpointCreateRequestBody:
      description: Body needed to create a Endpoint
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EndpointCreate"
    EndpointSearchRequestBody:
      description: Body needed to search Endpoints
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EndpointSearchRequestBody"
    EndpointPatchRequestBody:
      description: Body needed to modify a Endpoint
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EndpointPatch"
    EndpointUpdateRequestBody:
      description: Body needed to update a Endpoint
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EndpointUpdate"
    EndpointPopulateRequestBody:
      description: Body needed populate fields in Endpoint
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/EndpointPopulateRequestBody"
  schemas:
    EndpointCreate:
      type: object
      required:
        - path
        - httpMethod
        - projectId
      properties:
        path:
          type: string
        httpMethod:
          $ref: ./endpoint.schemas.yaml#/components/schemas/HttpMethod
        projectId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID
        errorCount:
          default: 0
          type: number
        successCount:
          default: 0
          type: number
        avgRequestPayloadSize:
          default: 0
          type: number
        avgResponsePayloadSize:
          default: 0
          type: number
        avgResponseTime:
          default: 0
          type: number
        requestCount:
          default: 0
          type: number
        responseCount:
          default: 0
          type: number
    EndpointPatch:
      x-min-properties: 1
      type: object
      properties:
        path:
          type: string
        httpMethod:
          $ref: ./endpoint.schemas.yaml#/components/schemas/HttpMethod
        projectId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID
        errorCount:
          default: 0
          type: number
        successCount:
          default: 0
          type: number
        avgRequestPayloadSize:
          default: 0
          type: number
        avgResponsePayloadSize:
          default: 0
          type: number
        avgResponseTime:
          default: 0
          type: number
        requestCount:
          default: 0
          type: number
        responseCount:
          default: 0
          type: number
    EndpointSearchRequestBody:
      $ref: "#/components/schemas/EndpointSearch"
    EndpointUpdate:
      type: object
      required:
        - path
        - httpMethod
        - projectId
        - errorCount
        - successCount
        - avgRequestPayloadSize
        - avgResponsePayloadSize
        - avgResponseTime
        - requestCount
        - responseCount
      properties:
        path:
          type: string
        httpMethod:
          $ref: ./endpoint.schemas.yaml#/components/schemas/HttpMethod
        projectId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID
        errorCount:
          default: 0
          type: number
        successCount:
          default: 0
          type: number
        avgRequestPayloadSize:
          default: 0
          type: number
        avgResponsePayloadSize:
          default: 0
          type: number
        avgResponseTime:
          default: 0
          type: number
        requestCount:
          default: 0
          type: number
        responseCount:
          default: 0
          type: number
    EndpointSearch:
      allOf:
        - $ref: "#/components/schemas/EndpointPaginationQuery"
        - $ref: "#/components/schemas/EndpointConditionQuery"
        - $ref: "#/components/schemas/EndpointPopulateRequestBody"
        - $ref: "#/components/schemas/EndpointDistinctQuery"
    EndpointConditionFields:
      type: object
      x-min-properties: 1
      properties:
        id:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchStringCondition
        updatedAt:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchDateCondition
        createdAt:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchDateCondition
        archived:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchBooleanCondition
        path:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchStringCondition
        httpMethod:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchStringCondition
        projectId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchStringCondition
    EndpointConditionQuery:
      type: object
      x-min-required:
        - and
        - or
      properties:
        and:
          type: array
          x-min-length: 1
          items:
            $ref: "#/components/schemas/EndpointConditionFields"
        or:
          type: array
          x-min-length: 1
          items:
            $ref: "#/components/schemas/EndpointConditionFields"
    EndpointPaginationQuery:
      type: object
      properties:
        pagination:
          $ref: "#/components/schemas/EndpointPagination"
    EndpointPagination:
      allOf:
        - $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Pagination
        - type: object
          properties:
            sort:
              $ref: "#/components/schemas/EndpointSort"
    EndpointSort:
      type: object
      properties:
        id:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
        updatedAt:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
        createdAt:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
        archived:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
        path:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
        httpMethod:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
        projectId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
    EndpointPopulateRequestBody:
      type: object
      properties:
        populate:
          $ref: "#/components/schemas/EndpointPopulateFields"
    EndpointPopulateFields:
      type: array
      items:
        $ref: "#/components/schemas/EndpointPopulateField"
    EndpointPopulateField:
      type: object
      required:
        - label
      properties:
        label:
          $ref: "#/components/schemas/EndpointPopulateEnum"
        match:
          type: object
    EndpointPopulateEnum:
      type: string
      enum:
        - project
    EndpointDistinctQuery:
      type: object
      properties:
        distincts:
          type: array
          items:
            $ref: "#/components/schemas/EndpointDistinctFields"
    EndpointDistinctFields:
      type: string
      enum:
        - path
        - httpMethod
        - projectId
