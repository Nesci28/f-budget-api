components:
  requestBodies:
    RequestCreateRequestBody:
      description: Body needed to create a Request
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/RequestCreate"
    RequestSearchRequestBody:
      description: Body needed to search Requests
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/RequestSearchRequestBody"
    RequestPatchRequestBody:
      description: Body needed to modify a Request
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/RequestPatch"
    RequestUpdateRequestBody:
      description: Body needed to update a Request
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/RequestUpdate"
    RequestPopulateRequestBody:
      description: Body needed populate fields in Request
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/RequestPopulateRequestBody"
  schemas:
    RequestCreate:
      type: object
      required:
        - endpointId
        - projectId
      properties:
        endpointId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID
        projectId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID
        payload:
          type: string
        payloadSize:
          type: number
    RequestPatch:
      x-min-properties: 1
      type: object
      properties:
        endpointId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID
        projectId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID
        payload:
          type: string
        payloadSize:
          type: number
    RequestSearchRequestBody:
      $ref: "#/components/schemas/RequestSearch"
    RequestUpdate:
      type: object
      required:
        - endpointId
        - projectId
      properties:
        endpointId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID
        projectId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID
        payload:
          type: string
        payloadSize:
          type: number
    RequestSearch:
      allOf:
        - $ref: "#/components/schemas/RequestPaginationQuery"
        - $ref: "#/components/schemas/RequestConditionQuery"
        - $ref: "#/components/schemas/RequestPopulateRequestBody"
    RequestConditionFields:
      type: object
      x-min-properties: 1
      properties:
        id:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchStringCondition
        updatedAt:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchDateCondition
        createdAt:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchDateCondition
        archived:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/SearchBooleanCondition
    RequestConditionQuery:
      type: object
      x-min-required:
        - and
        - or
      properties:
        and:
          type: array
          x-min-length: 1
          items:
            $ref: "#/components/schemas/RequestConditionFields"
        or:
          type: array
          x-min-length: 1
          items:
            $ref: "#/components/schemas/RequestConditionFields"
    RequestPaginationQuery:
      type: object
      properties:
        pagination:
          $ref: "#/components/schemas/RequestPagination"
    RequestPagination:
      allOf:
        - $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Pagination
        - type: object
          properties:
            sort:
              $ref: "#/components/schemas/RequestSort"
    RequestSort:
      type: object
      properties:
        id:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
        updatedAt:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
        createdAt:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
        archived:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Sorting
    RequestPopulateRequestBody:
      type: object
      properties:
        populate:
          $ref: "#/components/schemas/RequestPopulateFields"
    RequestPopulateFields:
      type: array
      items:
        $ref: "#/components/schemas/RequestPopulateField"
    RequestPopulateField:
      type: object
      required:
        - label
      properties:
        label:
          $ref: "#/components/schemas/RequestPopulateEnum"
        match:
          type: object
    RequestPopulateEnum:
      type: string
      enum:
        - endpoint
        - project
