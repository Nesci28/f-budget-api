configs:
  moduleName: User
  connectionName: yest-stats
components:
  schemas:
    User:
      type: object
      required:
        - email
        - password
        - role
      properties:
        email:
          x-index: true
          $ref: "../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Email"
        password:
          type: string
        role:
          $ref: "#/components/schemas/UserRole"
        projectIds:
          type: array
          items:
            $ref: "../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID"
        refreshTokens:
          type: array
          items:
            $ref: "#/components/schemas/RefreshToken"
        projects:
          x-localField: projectIds
          type: array
          items:
            $ref: "../../project/definitions/project.schemas.yaml#/components/schemas/Project"

    JwtTokenPayload:
      type: object
      required:
        - userId
        - role
      properties:
        userId:
          type: string
        role:
          $ref: "#/components/schemas/UserRole"

    UserRole:
      type: string
      enum:
        - admin
        - member

    RefreshToken:
      type: object
      required:
        - token
        - deviceUUID
        - userAgent
        - rememberMe
        - iat
        - exp
      properties:
        token:
          x-index: true
          $ref: "../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/BearerToken"
        deviceUUID:
          $ref: "../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/Uuid"
        dealerUserId:
          $ref: ../../../../node_modules/@yest/contract/resources.yaml#/components/schemas/ObjectID
        userAgent:
          type: string
        rememberMe:
          type: boolean
        iat:
          description: Issued At (timestamp in UTC)
          type: number
        exp:
          description: Expiration Time (timestamp in UTC)
          type: number